/* =============================================================================
   Application Stylesheet
   -----------------------------------------------------------------------------
   Defines the visual appearance, layout, color palette, and responsive behavior
   for the entire application. Uses CSS variables for easy theming and supports
   both dark and light modes. All sections are clearly commented for maintainability.
   ============================================================================= */

/* -----------------------------------------------------------------------------
   Color Variables
   -----------------------------------------------------------------------------
   Defines the color palette for both dark and light modes using CSS variables.
   All colors are referenced via these variables throughout the stylesheet.
   ----------------------------------------------------------------------------- */

:root {
    /* Dark mode color scheme (default) */
    --back: black;            /* Background color */
    --fore: #e3e3e3;          /* Text color */
    --border: #777;           /* Border color for inputs and divisions */
    --system: #9cdcda;        /* System message color and accent color */
    --review: #bebebe;        /* Color for review controls */
    --pending: #111111;       /* Posts awaiting moderation */
    --processing: #111111;    /* Posts being processed */
    --delisted: #051d3a;      /* Posts hidden from main feed */
    --reported: rgb(75, 10, 75); /* Posts flagged for review */
    --rejected: rgb(37, 4, 4);   /* Posts that failed moderation */
    --banned: rgb(105, 10, 10);  /* Posts from banned users */
    --disabled: #444;         /* Disabled form elements */
}

/* Light mode color scheme (activated by system preference) */
@media (prefers-color-scheme: light) {
    :root {
        --back: white;
        --fore: black;
        --border: #ccc;
        --system: black;
        --review: rgb(63, 63, 63);
        --pending: #eeeeee;
        --processing: #eeeeee;
        --delisted: rgb(97, 156, 223);
        --reported: rgb(243, 186, 243);
        --rejected: rgb(250, 226, 226);
        --banned: rgb(231, 102, 102);
        --disabled: #ccc;
    }
}

/* -----------------------------------------------------------------------------
   Base Layout
   -----------------------------------------------------------------------------
   Core layout settings for the document body and common elements.
   ----------------------------------------------------------------------------- */

body {
    margin: 8px auto;       /* Center content with small margin */
    width: max-content;     /* Adjust width to content */
    max-width: calc(100% - 16px); /* Prevent horizontal scrolling on small screens */
}

/* Form element styling for consistent appearance */
textarea {
    width: min(calc(100% - 12px), 600px); /* Responsive width with max-width */
    height: 4em;                         /* Default height for post textarea */
    padding: 5px;
}

/* Firefox-specific adjustments for textarea width */
@-moz-document url-prefix() {
    textarea {
        width: min(calc(100% - 14px), 600px);
    }
}

/* -----------------------------------------------------------------------------
   Typography and Form Controls
   -----------------------------------------------------------------------------
   Consistent font styling across all text and interactive elements.
   ----------------------------------------------------------------------------- */

body,
textarea,
input,
select,
button,
::file-selector-button {
    font-family: Consolas, monospace;    /* Monospace for retro/technical feel */
    font-size: 12px;                     /* Base font size */
    color: var(--fore);                  /* Text color from variables */
    background: var(--back);             /* Background color from variables */
    accent-color: var(--system);         /* Accent color for checkboxes, etc. */
    -webkit-text-size-adjust: none;      /* Prevent iOS font size adjustment */
    text-size-adjust: none;
}

::selection {
    background: var(--system);           /* Highlight selection with accent color */
    color: var(--back);
}

input:disabled {
    color: var(--disabled);              /* Disabled input styling */
}

input[type="submit"],
button,
select {
    margin: 7px 0;                      /* Spacing for form controls */
}

input[type="text"],
input[type="password"] {
    margin: 4px 0;
}

input,
textarea,
select,
button,
::file-selector-button {
    border-radius: 5px;                  /* Consistent border styling */
    border-color: var(--border);
}

/* -----------------------------------------------------------------------------
   Links and Navigation
   ----------------------------------------------------------------------------- */

a {
    color: var(--system);                /* Standard link styling */
}

nav {
    float: right;                        /* Top-right navigation bar */
}

nav a {
    text-decoration: none;
}

h1 a {
    text-decoration: none;
    color: var(--fore);
}

h1 {
    font-size: 1em;
}

/* -----------------------------------------------------------------------------
   Status Messages and System Elements
   ----------------------------------------------------------------------------- */

.system {
    color: var(--system);
}

.status {
    color: var(--review);
}

.status a {
    text-decoration: none;
}

details.review form {
    display: inline;                     /* Moderation review controls */
}

/* -----------------------------------------------------------------------------
   Post Layout and Styling
   ----------------------------------------------------------------------------- */

div#posts {
    display: flex;                       /* Posts container - flexbox layout */
    flex-wrap: wrap;
    gap: calc(1vh + 1vw + 16px);         /* Responsive spacing between posts */
    margin-top: 12px;
    margin-bottom: max(calc(4vh + 4vw - 50px), 12px); /* Responsive bottom margin */
    align-items: center;
}

div.post.solo details.review {
    height: 45px;                        /* Review section height on single post view */
}

div#posts div.post {
    flex: clamp(300px, 34vh, 800px);     /* Individual post sizing in posts grid */
}

div.post {
    display: grid;                       /* Base post layout using grid */
    justify-content: center;
    gap: 8px;
    margin: 0 -8px;
    padding: 0 8px;
}

/* -----------------------------------------------------------------------------
   Post Status Styling
   ----------------------------------------------------------------------------- */

div.pending,
div.delisted,
div.reported,
div.rejected,
div.banned {
    padding-top: 8px;                    /* Common padding for posts with status indicators */
    padding-bottom: 8px;
}

div.pending {
    background: var(--pending);          /* Background colors for different post statuses */
}

div.processing {
    background: var(--processing);
}

div.delisted {
    background: var(--delisted);
}

div.reported {
    background: var(--reported);
}

div.rejected {
    background: var(--rejected);
}

div.banned {
    background: var(--banned);
}

/* -----------------------------------------------------------------------------
   Post Content Elements
   ----------------------------------------------------------------------------- */

div.post-body {
    overflow-y: clip;                    /* Prevent vertical scrolling */
    overflow-wrap: anywhere;             /* Allow breaking words at any point */
    max-width: 600px;                    /* Maximum width for readability */
}

div.media {
    margin: 0 auto;                      /* Media container in posts */
    min-width: 300px;
    max-width: max-content;
    text-align: center;
}

div.media img,
div.media video,
div.youtube-thumbnail img {
    max-width: max(300px, calc(100% + 16px));
    margin: 0 -8px;                      /* Extend slightly beyond post boundaries */
    height: auto;
    width: auto;
}

div#posts div.media img,
div#posts div.media video,
div#posts div.youtube-thumbnail img {
    max-height: clamp(300px, 80vh, 1200px); /* Height constraints for media in post grid */
}

div.arrow a {
    text-decoration: none;               /* "See more" arrow styling */
    font-size: 1.2em;
}

div#user a {
    text-decoration: none;               /* User link styling */
}

p#notice {
    color: var(--system);                /* Notification styling */
}

/* -----------------------------------------------------------------------------
   Loading Spinner
   ----------------------------------------------------------------------------- */

div#spinner {
    width: 10px;
    height: 10px;
    border: 2px solid var(--fore);
    border-top-color: transparent;       /* Creates spinner effect */
    border-radius: 50%;
    animation: spinner 0.85s linear infinite;
    display: none;                       /* Hidden by default, shown via JavaScript */
}

@keyframes spinner {
    to {
        transform: rotate(360deg);       /* Full rotation animation */
    }
}

/* -----------------------------------------------------------------------------
   Layout Helpers
   ----------------------------------------------------------------------------- */

div.row {
    margin-top: 4px;                     /* Horizontal row layout */
    display: flex;
    gap: 6px;
    align-items: center;
}

div.row input[type="submit"] {
    margin: unset;                       /* Reset margin for submit buttons in rows */
}

div.youtube {
    margin: 0 auto;                      /* YouTube embeds */
    width: fit-content;
}

div.youtube-logo img {
    height: 1.7em;
    filter: brightness(0.2) invert(1);   /* Adjust YouTube logo color for dark mode */
}

@media (prefers-color-scheme: light) {
    div.youtube-logo img {
        filter: saturate(0) brightness(0.2); /* Invert YouTube logo filter for light mode */
    }
}

div.checkbox-container {
    display: flex;                       /* Checkbox alignment */
    align-items: center;
}

div.checkbox-container label {
    margin-left: 2px;
}

/* -----------------------------------------------------------------------------
   Form Layouts
   ----------------------------------------------------------------------------- */

form.grid {
    display: grid;                       /* Grid-based form layouts with label alignment */
    grid-template-columns: max-content max-content; /* Label + input columns */
    column-gap: 5px;
    align-items: center;
}

form.grid label {
    text-align: right;                   /* Right align labels for readability */
}

form.grid div.checkbox-container,
form.grid input[type="submit"] {
    grid-column: 2;                      /* Position form elements that should span grid columns */
    justify-self: start;
}

/* -----------------------------------------------------------------------------
   Form Field Sizing
   ----------------------------------------------------------------------------- */

input[type="password"] {
    width: 31ch;                         /* Sized for typical password lengths */
}

input#username {
    width: 17ch;                         /* Sized for maximum username length */
}

div.see-more a {
    text-decoration: none;               /* "See more" link styling */
}
