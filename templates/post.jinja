<div class="post {{ post.status }}{{ " solo" if solo }}" id="post-{{ post.uuid }}">
    {% set poster = post.username if post.username else "anon (" + post.anon_hash + ")" %}
    {% if post.body|length > 0 and post.status != "banned" %}
    <div class="body">
        {{ post.body }}
    </div>
    {% endif %}
    {% if post.media_file_name %}
    {% if post.status == "approved" %}
    {% set media_path = "/media/" + post.uuid + "/" + post.media_file_name|urlencode %}
    <div class="media">
        {% include "media.jinja" %}
    </div>
    {% elif post.status == "rejected" %}
    <span class="post-info">File "{{ post.media_file_name|e }}" deleted.</span>
    {% elif post.status == "pending" %}
    {% if admin %}
    {% set media_path = "/admin/decrypt-media/" + post.uuid %}
    {% include "media.jinja" %}
    <br>
    <span class="post-info">File: {{ post.media_file_name|e }}</span>
    {% else %}
    <br>
    <span class="post-info">File "{{ post.media_file_name|e }}" pending review.</span>
    {% endif %}
    {% endif %}
    {% endif %}
    <div class="uuid">
        <a href="/post/{{ post.uuid }}">{{ post.uuid }}</a>
    </div>
    {% if solo %}
    <p class="info">
        Poster: {{ poster }}
        <br>
        At: {{ post.created_at }}
        {% if post.media_file_name %}
        <br>
        Filename: {{ post.media_file_name|e }}
        {% endif %}
    </p>
    {% endif %}
    {% if post.status == "approved" %}
    {% endif %}
    {% if admin and (post.status == "pending" or solo) %}
    <details class="mod" {{ "open" if post.status=="pending" }}>
        <summary>Mod</summary>
        <form action="/admin/review-post" method="post" class="approve" data-fetch>
            <input type="hidden" name="uuid" value="{{ post.uuid }}">
            <input type="hidden" name="status" value="approved">
            <input type="submit" value="Approve" {{ "disabled" if post.status=="approved" }}>
        </form>
        <form action="/admin/review-post" method="post" class="reject" data-fetch>
            <input type="hidden" name="uuid" value="{{ post.uuid }}">
            <input type="hidden" name="status" value="rejected">
            <input type="submit" value="Reject" {{ "disabled" if post.status=="rejected" }}>
        </form>
        <form action="/admin/review-post" method="post" class="ban" data-fetch>
            <input type="hidden" name="uuid" value="{{ post.uuid }}">
            <input type="hidden" name="status" value="banned">
            <input type="submit" value="Ban" {{ "disabled" if post.status=="banned" }}>
        </form>
    </details>
    {% elif post.status == "rejected" %}
    <form action="/hide-rejected-post" method="post" data-fetch>
        <span class="post-info">Post rejected.</span>
        <input type="hidden" name="uuid" value="{{ post.uuid }}">
        <input type="submit" value="Hide">
    </form>
    {% elif post.status == "banned" %}
    <br>
    <span class="post-info">This post has been deleted and its IP has been banned for a month.</span>
    {% endif %}
</div>
